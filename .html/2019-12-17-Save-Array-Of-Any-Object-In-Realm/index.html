<!DOCTYPE html><html><head><meta charset="utf-8"/><meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport"/><meta content="dark light" name="color-scheme"/><title>Khan's Blog</title><link href="/resources/index.css" rel="stylesheet"/><link href="/resources/prism.css" rel="stylesheet"/><link href="/resources/code-theme.css" rel="stylesheet"/><script src="/resources/index.js"></script><script src="/resources/prism.js"></script></head><body><div class="content"><article><h2>The problem: Realm only allows you to save lists of objects (like arrays) in the <code>List&lt;T&gt;</code> format.</h2><p>For instance we'll take this dog object. The dog can have multiple Collars, but you have to store them in a list like so.</p><pre><code class="language-swift">class Dog: Object {
    @objc dynamic var name = ""
    @objc dynamic var age = 0

    let collars = List&lt;Collar&gt;()
}

class Collar: Object {
    @objc dynamic var color = "Blue"
    @objc dynamic var favorite = false
}
</code></pre><p>This makes for slightly confusing code when trying to retrieve the collars from the dog and do other operations. However, we can abstract the list and make it an array property by adding one propery to the Dog object</p><pre><code class="language-swift">class Dog: Object {
    @objc dynamic var name = ""
    @objc dynamic var age = 0

    var collars: [Collar] {
      get {
        return _collars.map{ $0 }
      }
      set {
        _collars.removeAll()
        _collars.append(objectsIn: newValue)
      }
    }
    // The original property is here, we simply renamed it and added the above collar variable.
    let _collars = List&lt;Collar&gt;()
}
</code></pre><p>We change the <code>collars</code> property to <code>_collars</code>, then make a new variable <code>collars</code> that realm wont track.</p><p>This variable has two key parts: a getter, and a setter.</p><p>The getter simply maps the <code>_collars</code> object to an array and returns the array.</p><pre><code class="language-swift">get {
    return _collars.map{ $0 }
}
</code></pre><p>The setter removes all the values using <code>.removeAll()</code> and then sets the <code>_collars</code> list from the given array.</p><p>Now we can use the <code>collars</code> property just like any other array. Just make sure to use it in a write block when writing the object to storage like so:</p><pre><code class="language-swift">try! realm.write {
    dog.collars = [Collar(color: "Red", favorite: false), Collar(color: "Blue", favorite: true)]
}
</code></pre><p>This method makes it easier to work with the <code>List&lt;&gt;</code> object and allows for simpler, easier to read code in the rest of your app.</p></article></div><footer><p>Copyright ©️ Khan Winter 2024</p><p>Built In Swift</p><p><a href="https://twitter.com/thecoolwinter" rel="me" target="_blank">Twitter</a> | <a href="https://threads.net/thecoolwinter" rel="me" target="_blank">Threads</a> | <a href>RSS</a></p></footer></body></html>