<!DOCTYPE html><html lang="en" data-theme="light"><head><meta content="utf-8" name="charset"></meta><meta content="width=device-width, initial-scale=1, maximum-scale=5" name="viewport"></meta><meta content="only light" name="color-scheme"></meta><title>Khan's Blog 路 Getting Started With Vapor 4.0</title><meta content="Building a small Toggl Clone using Vapor." name="description"></meta><meta content="all" name="robots"></meta><meta content="Khan Winter, Swift, macOS, JavaScript, iOS, web development, blog, SwiftUI" name="keywords"></meta><meta content="website" property="og:type"></meta><meta content="Khan's Blog" property="og:sitename"></meta><meta content="https://khanwinter.com/2020-11-04-Getting-Started-With-Vapor-4/" property="og:url"></meta><meta content="Khan's Blog 路 Getting Started With Vapor 4.0" property="og:title"></meta><meta content="Building a small Toggl Clone using Vapor." property="og:description"></meta><meta content="https://khanwinter.com/2020-11-04-Getting-Started-With-Vapor-4/" property="twitter:url"></meta><meta content="Khan's Blog 路 Getting Started With Vapor 4.0" property="twitter:title"></meta><meta content="Building a small Toggl Clone using Vapor." property="twitter:description"></meta><link href="https://khanwinter.com/2020-11-04-Getting-Started-With-Vapor-4/" rel="canonical"/><link href="https://bsky.app/profile/khanwinter.com" rel="me"/><link href="https://twitter.com/thecoolwinter" rel="me"/><link href="https://mastodon.social/@thecoolwinter" rel="me"/><link href="https://threads.net/thecoolwinter" rel="me"/><link href="https://www.linkedin.com/in/thecoolwinter/" rel="me"/><link href="/assets/index.css" rel="stylesheet"/><script src="/assets/index.js"></script><link href="/assets/prism.css" rel="stylesheet"/><link href="/assets/code-theme.css" rel="stylesheet"/><script defer src="/assets/prism.js"></script><link data-nav="true" href="/" rel="prefetch"/><link data-nav="true" href="/about" rel="prefetch"/><link data-nav="true" href="/2025-03-29-Cross-Compiling-Swift/" rel="prefetch"/><link data-nav="true" href="/2024-11-02-New-Blog/" rel="prefetch"/><link data-nav="true" href="/2024-11-01-Hide-Desktop-Shortcut/" rel="prefetch"/><link data-nav="true" href="/2021-08-07-Sort-List-Of-Objects/" rel="prefetch"/><link data-nav="true" href="/2021-05-08-Implementing-Sin/" rel="prefetch"/><link data-nav="true" href="/2021-03-17-How-Computers-Calculate-Sin/" rel="prefetch"/><link data-nav="true" href="/2021-02-02-The-Search-Engine-Matrix/" rel="prefetch"/><link data-nav="true" href="/2021-01-07-Save-Codable-Dates-In-Firestore/" rel="prefetch"/><link data-nav="true" href="/2020-05-5-Scripting-With-Swift/" rel="prefetch"/><link data-nav="true" href="/2020-02-24-Programatic-UI-In-UIKit-Without-Storyboards/" rel="prefetch"/><link data-nav="true" href="/2020-11-04-Getting-Started-With-Vapor-4/" rel="prefetch"/><link data-nav="true" href="/2019-12-17-Save-Array-Of-Any-Object-In-Realm/" rel="prefetch"/><link data-nav="true" href="/2020-05-11-Subclassing-Sprites-In-SpriteKit/" rel="prefetch"/><link data-nav="true" href="/2020-05-5-Using-Dependencies-In-Swift-Scripts/" rel="prefetch"/><link data-nav="true" href="/2020-02-21-Easy-Container-Controllers-in-Swift/" rel="prefetch"/><link data-nav="true" href="/2019-12-19-Firebase-Auth-State-Listeners-iOS/" rel="prefetch"/></head><body><nav><ul><li><a href="/index.html">Posts</a></li><li><button onclick="navRandom()">Random</button></li><li><a href="/about.html">About</a></li></ul></nav><div class="content"><article><div class="article-header"><p>Nov 4, 2020</p><h1>Getting Started With Vapor 4.0</h1><h3>Building a small Toggl Clone using Vapor.</h3><div class="avatar" href="/about.html"><a href="/about.html"><img alt="Avatar Image" height="24" src="/assets/avatar.webp" width="24"></img><span>Khan Winter</span></a>路<a href="https://bsky.app/profile/khanwinter.com" target="_blank"><svg aria-label="Bluesky" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 530" version="1.1"><path d="m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z"/></svg></a></div></div><h2 id="what-is-vapor"><a href="#what-is-vapor" class="header-link">What is Vapor?</a></h2><p><a href="https://vapor.codes/">Vapor</a> is a modern server-side swift framework. It's community built , with tons of support for databases, hosting and user management. It's built on my favorite language <strong>Swift</strong>, meaning it's easy to learn, and has type safety built in.</p><p>I'll be building a small time tracking API similar to <a href="https://toggl.com/">Toggl</a> over the course of a few posts, this is the first in this series.</p><h2 id="get-started--installation"><a href="#get-started--installation" class="header-link">Get Started - Installation</a></h2><h3 id="install-swift"><a href="#install-swift" class="header-link">Install Swift</a></h3><p>If you're running a Mac, and already have Xcode installed. Great, you can skip this step. If not, go to the <a href="https://apps.apple.com/us/app/xcode/id497799835?mt=12">App Store</a> and download it.</p><p>If you're running a Linux computer, you'll have to go over to the <a href="https://swift.org/download/#using-downloads">Swift Downloads</a> page, and follow the instructions there for your distribution.</p><h3 id="install-vapor"><a href="#install-vapor" class="header-link">Install Vapor</a></h3><p>We're going to need the vapor toolbox to run any project we make.</p><p>To install it on mac, you'll need <a href="https://brew.sh/">homebrew</a> installed. Once installed, run <code>brew install vapor</code> and homebrew will install it all for you. Then when it's done, verify your installation by running <code>vapor -help</code>. You should see a list of available commands.</p><p>If you're on Linux, you'll have to build vapor from source. Just run these commands in a terminal.</p><pre><code class="language-shell">git clone https://github.com/vapor/toolbox.git
cd toolbox
git checkout &lt;desired version&gt;
make install
</code></pre><p>Then verify it's installed correctly by running <code>vapor -help</code>.</p><h2 id="creating-a-project"><a href="#creating-a-project" class="header-link">Creating a project</a></h2><p>Now, we're going to set up our working directory. I'm going to build a time logging API, so I'll name my project TimeLog.</p><p>We'll just run <code>vapor new TimeLog</code> and follow the prompts given to you. You'll probably want to answer no to all the questions and get a bare-bones template to get started. For that, you can add a <code>-n</code> flag to the end of the prevous command like this <code>vapor new TimeLog -n</code>.</p><p>Sweet! Now you have an empty vapor project!</p><h2 id="get-a-database-running"><a href="#get-a-database-running" class="header-link">Get a Database Running</a></h2><p>I'm going to be using the Postgres database, as it's the one I have the most experience with. Vapor <a href="https://github.com/vapor/sqlite-nio">supports</a> <a href="https://github.com/vapor/fluent-mongo-driver">tons</a> <a href="https://github.com/vapor/mysql-nio">of</a> <a href="https://github.com/vapor/postgres-nio">databases</a>. So you should be able to follow along with this tutorial no matter which one you choose.</p><p>If you don't have any databases installed, I'd recommend Postgres. <a href="https://gist.github.com/ibraheem4/ce5ccd3e4d7a65589ce84f2a3b7c23a3">This gist</a> helped me a lot when I first installed it.</p><p>Since I'm using Postgres, I've created a database named <code>time-table</code> and opened the database to the url <code>postgres://&lt;Admin-Name&gt;:@localhost:5432/time-table</code>. Since this isn't goint to be a public project quite yet, I left off giving the database a password. If you're planning on releasing this server to the world, <em>you need a password</em>.</p><p>Once you have the url of your database, make a <code>.env</code> file in the root directory of your project. Then, insert the url you just made like this <code>DB_URL=postgres://&lt;Admin-Name&gt;:@localhost:5432/time-table</code> on the first line. Then you're all set with your database.</p><h2 id="finally-swift"><a href="#finally-swift" class="header-link">Finally, Swift</a></h2><h3 id="dependencies"><a href="#dependencies" class="header-link">Dependencies</a></h3><p>Make an Xcode project by running <code>vapor xcode</code> in your project's directory.</p><p>For this series, I'm going to be using a few SPM packages. If you're following along, install them by opening the <code>Package.swift</code> and adding these three dependencies below <code>.product(name: "Vapor", package: "vapor"),</code>:</p><pre><code class="language-swift">.product(name: "Fluent", package: "fluent"),
.product(name: "FluentPostgresDriver", package: "fluent-postgres-driver"),
.product(name: "JWT", package: "jwt")
</code></pre><p>Then, below where it says <code>.package(url: "https://github.com/vapor/vapor.git", from: "4.0.0"),</code> add these lines.</p><pre><code class="language-swift">.package(url: "https://github.com/vapor/fluent.git", from: "4.0.0"),
.package(url: "https://github.com/vapor/fluent-postgres-driver.git", from: "2.0.0"),
.package(url: "https://github.com/vapor/jwt.git", from: "4.0.0-rc.1"),
</code></pre><p>This will install Fluent, Vapor's database framework, JWT, which we'll use for user authentication and the Fluent Postgres Driver so we can use our Postgres database.</p><h3 id="connect-the-database"><a href="#connect-the-database" class="header-link">Connect the database</a></h3><p>In your <code>configure.swift</code> file under Sources &gt; App add the following extension to the top of the file.</p><pre><code class="language-swift">extension Application {
    static let databaseURL = URL(string: Environment.get("DB_URL")!)!
}
</code></pre><p>This uses the <code>.env</code> file we made earlier to get the database url. You can use <code>.env</code> files for other things like admin keys and passwords you don't want plain in your code for anyone to see.</p><p>Now lets use that url in the <code>configure(_ )</code> function add the following line to the top.</p><pre><code class="language-swift">try app.databases.use(.postgres(url: Application.databaseURL), as: .psql)
</code></pre><p>Right now, Xcode will throw an error, so import the required dependencies at the top of the file.</p><pre><code class="language-swift">import Fluent
import FluentPostgresDriver
import JWT
</code></pre><h2 id="conclusion"><a href="#conclusion" class="header-link">Conclusion</a></h2><p>There we go! You now have an empty vapor project with an empty database and all the dependencies installed. I'll be making a part 2 soon for this series, when it's up it'll be linked right here!</p><hr></hr><div class="article-footer"><p>Nov 4, 2020</p><div class="avatar" href="/about.html"><a href="/about.html"><img alt="Avatar Image" height="24" src="/assets/avatar.webp" width="24"></img><span>Khan Winter</span></a>路<a href="https://bsky.app/profile/khanwinter.com" target="_blank"><svg aria-label="Bluesky" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 530" version="1.1"><path d="m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z"/></svg></a></div></div></article></div><footer><p>Copyright &copy Khan Winter 2025</p><p><a href="https://github.com/thecoolwinter/blog">Built In Swift</a></p><p><a href="https://bsky.app/profile/khanwinter.com" rel="me" target="_blank">Bluesky</a> | <a href>RSS</a></p></footer></body></html>